<html>
	<head>

		<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
   		<meta name="viewport" content="width=device-width, initial-scale=1">
    	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<title>Recomended Genre</title>

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
		
		<style>
		
			.genre{
				display: none;
			}

			li:hover{
				background-color: #dddddd
			}

			.checked{
				background-color: #dddddd
			}

			
		</style>
	</head>
	<body>
		<h1>Customize Your Reading Experience</h1>
		<p>Don't know where to start? We can help with that.</p>
		<p>Chose 3 to 5 genres and we'll bring up </p>
		<form action="/recommendations" method="POST">

			<div id=log></div>
			<ul id="recommendations"></ul>
			<input type="submit" id="submit" />
		</form>



	</body>

	<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>

  <!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

		

	<script type="text/javascript">
		var genre = ["Action/Adventure", "Comedy", "Romance", "Mystery", "Horror", "Manga/Comic", "Fantasy", "Sci-fi", "Historical", "Parody", "Drama", "Crime", "Western"];

		// var rec = [];

		// //if list of genre is greater than 5 randomly pick five genres
		// if(genre.length > 5){
		// 	//loop untill five items are in array
		// 	while(rec.length < 5){
		// 		//pick a random number based on size of genre list
		// 		var r = Math.floor(Math.random()*genre.length);
		// 		var g = genre[r];	//get genre
		// 		var unique = true;	//assume genre is unique to recommended list
		// 		if(rec.length > 0){
		// 			//loop through everything in rec list to compare to random pick
		// 			for(var i = 0; i < rec.length; i++){
		// 				//if match found then random pick was not unique and for loop ends
		// 				if(rec[i] == g){
		// 					unique = false;
		// 					break;
		// 				}
		// 			}
		// 		} 
		// 		if(unique) rec.push(g) //if unique put genre in recomendation list
		// 	}
		// }
		// else{
		// 	//if genre list is too small genre list becomes recomendation list
		// 	rec = genre;
		// }

		//generate list of genres
		for(var i = 0; i < genre.length; i++){

			var $li = $("<li>").addClass("genreItem")
			var $input = $("<input>").attr("type","checkbox").attr("name", "genre[]").attr("id","cb"+i).addClass("genre").val(genre[i]).appendTo($li)
			var $label = $("<label>").text(genre[i]).attr("for", "cb"+i).appendTo($li)
			$("#recommendations").append($li);
		}

		//limits checked to 5
		$(document.body).on("click", ".genre", function(){
			console.log($("input:checked").length);

			if($("input:checkbox:checked").length > 5)
				return false;
		})


		$(document.body).on("click", ".genreItem", function(){

			if($(this).children(".genre").prop("checked"))
				$(this).addClass("checked");
			else
				$(this).removeClass("checked");
		})
		//only submit if at least three are picked
		$("#submit").on("click",function(){
			var numChecked = $("input:checkbox:checked").length;
			
			if(numChecked< 3){

				$("#log").text("You need to pick atleast 3 genres")
				return false
			}
			console.log("submiting");
			console.log($("input:checked"))
			return false;

		})

	</script>
</html>